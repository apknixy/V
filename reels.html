<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>VideoFire - Reels</title>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="firebase.js"></script>
  <style>
    body { background: #000; margin: 0; padding: 0; }
    .videoContainer { height: 100vh; scroll-snap-align: start; position: relative; }
    .scrollContainer { 
      height: 100vh; 
      overflow-y: scroll; 
      scroll-snap-type: y mandatory;
    }
    iframe { width: 100%; height: 100%; border: none; }
    .adsBanner { position: absolute; bottom: 10px; width: 100%; text-align: center; }
  </style>
</head>
<body>

<div class="scrollContainer" id="videoArea"></div>

<script>
  let videoArea = document.getElementById('videoArea');

  function loadVideos() {
    db.ref("videos").limitToLast(50).once("value", snapshot => {
      snapshot.forEach(child => {
        const data = child.val();
        const div = document.createElement("div");
        div.className = "videoContainer";

        // Main video player
        div.innerHTML = `
          <iframe src="${data.videoUrl}?controls=0&autoplay=1&mute=0&loop=1" allow="autoplay"></iframe>
          
          <!-- VAST Ad Simulation -->
          <iframe src="vast_ad.html" style="position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0.5;"></iframe>
          
          <!-- Native Banner Ad -->
          <div class="adsBanner">
            <script async="async" data-cfasync="false" src="//pl26835150.profitableratecpm.com/39628927897b21d6c45567203000ccc6/invoke.js"></script>
            <div id="container-39628927897b21d6c45567203000ccc6"></div>
          </div>
        `;
        videoArea.prepend(div);
      });
    });
  }

  loadVideos();
</script>

</body>
</html>
